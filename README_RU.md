# Hyprshot-rs

[![Rust](https://img.shields.io/badge/language-Rust-orange.svg)](https://www.rust-lang.org/)
[![License: GPL-3.0](https://img.shields.io/badge/License-GPL%203.0-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)

Утилита для создания скриншотов в Hyprland, написанная на Rust.

## Возможности

- Создание скриншотов области экрана
- Создание скриншотов окна
- Создание скриншотов монитора
- Автоматическое сохранение в директорию Pictures с временной меткой
- Копирование в буфер обмена
- Поддержка различных окружений рабочего стола (Hyprland, KDE, GNOME)
- Поддержка Wayland и X11
- Возможность запуска команды после создания скриншота
- Настраиваемые уведомления

## Требования

- Rust (последняя стабильная версия)
- Wayland
- Hyprland
- Зависимости для сборки:
  - `pkg-config`
  - `libwayland-dev`
  - `libwayland-client`
  - `libwayland-protocols`
  - `libwayland-egl`
  - `libwayland-cursor`
  - `libwayland-server`

## Установка

### Сборка из исходников

```bash
git clone https://github.com/yourusername/hyprshot-rs.git
cd hyprshot-rs
cargo build --release
```

После сборки исполняемый файл будет доступен в `target/release/hyprshot-rs`

## Использование

### Базовое использование

```bash
# Создание скриншота области с автоматическим именем файла
hyprshot-rs -m region

# Создание скриншота окна
hyprshot-rs -m window

# Создание скриншота монитора
hyprshot-rs -m screen
```

### Опции

- `-m, --mode <MODE>` - Режим работы (region, window, screen)
- `-o, --output-path <PATH>` - Путь для сохранения файла (опционально)
- `-c, --clipboard-only` - Только копировать в буфер обмена
- `-r, --raw` - Вывод сырых данных изображения
- `-d, --debug` - Включить отладочный режим
- `-s, --silent` - Отключить уведомления
- `-t, --notif-timeout <MS>` - Таймаут уведомлений в миллисекундах (по умолчанию 5000)
- `--command <CMD>` - Команда для выполнения после создания скриншота

### Примеры

```bash
# Создание скриншота области с автоматическим именем файла
hyprshot-rs -m region

# Создание скриншота области с указанием пути
hyprshot-rs -m region -o /path/to/screenshot.png

# Создание скриншота области только в буфер обмена
hyprshot-rs -m region -c

# Создание скриншота окна с отладочной информацией
hyprshot-rs -m window -d

# Создание скриншота монитора с открытием в просмотрщике
hyprshot-rs -m screen -- feh
```

## Формат имени файла

По умолчанию скриншоты сохраняются в директорию Pictures с именем в формате:
```
YYYY-MM-DD-HHMMSS_hyprshot.png
```

Например:
```
2025-05-08-182552_hyprshot.png
```

## Поддержка окружений рабочего стола

Программа автоматически определяет окружение рабочего стола и использует соответствующий метод создания скриншотов:

- Hyprland: Нативная реализация через Wayland
- KDE: Использование KDE API
- GNOME: Использование GNOME Screenshot
- Другие: Нативная реализация через Wayland

## Лицензия

Этот проект распространяется под лицензией [GPL-3.0](LICENSE).

## Вклад в проект

Мы приветствуем вклад в проект! Пожалуйста, создавайте issue и pull request'ы для улучшения программы.

## Особенности реализации

- Использование нативного протокола Wayland для создания скриншотов
- Поддержка различных форматов пикселей
- Автоматическое определение окружения рабочего стола
- Подробное логирование для отладки
- Оптимизированная обработка изображений

## Разработка

### Сборка с различными функциями

```bash
# Сборка с поддержкой grim
cargo build --release --features grim

# Сборка только с нативной реализацией
cargo build --release --no-default-features
```

### Отладка

Для включения подробного логирования используйте флаг `-d`:

```bash
hyprshot-rs -m region -o test.png -d
```

## Известные проблемы

- Функция создания скриншотов окон находится в разработке
- Функция создания скриншотов всего экрана находится в разработке

## Контакты

Если у вас есть вопросы или предложения, пожалуйста, создайте [issue](https://github.com/vremyavnikuda/hyprshot-rs/issues) в репозитории. 